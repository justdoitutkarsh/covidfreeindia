{"remainingRequest":"/Users/utkpandey/Documents/covidfreeindia/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/utkpandey/Documents/covidfreeindia/src/pages/hospital.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/utkpandey/Documents/covidfreeindia/src/pages/hospital.vue","mtime":1619698592747},{"path":"/Users/utkpandey/Documents/covidfreeindia/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/utkpandey/Documents/covidfreeindia/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/utkpandey/Documents/covidfreeindia/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/utkpandey/Documents/covidfreeindia/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { EventBus } from '../main.js'\nimport axios from \"axios\";\nimport moment from 'moment'\n\nexport default {\n  components: {\n    \n  },\n  data() {\n    return {\n    selectedCityName: null,\n    selectedStateName: null,\n    currentTab:'',\n    addedCities:[\n        \"Lucknow\"\n      ],\n    addedStates:[\"Uttar Pradesh\"],\n    hospitalAvailabilityData:[],\n    allHospitalAvailabilityData:[]\n    };\n  },\n  computed: {\n    \n  },\n  mounted(){\n    this.currentTab=sessionStorage.selectedTab\n    EventBus.$on('setPathName',(value)=>{\n      sessionStorage.selectedTab = value;\n      this.currentTab=sessionStorage.selectedTab\n      this.selectedCityName=null;\n    })\n    if(this.selectedStateName===null){\n        this.selectedCityName=null;\n        this.addedCities=[];\n    }\n    const options = {\n    method: 'GET',\n    url: 'https://life-api.coronasafe.network/data/hospital_clinic_centre.json',\n  \n    };\n    let vm=this\n    axios.request(options).then(function (response) {\n        vm.allHospitalAvailabilityData = response.data.data;\n       // let city = vm.allHospitalAvailabilityData.map(cityAvailable => cityAvailable.district);\n        let state = vm.allHospitalAvailabilityData.map(stateAvailable => stateAvailable.state);\n       // vm.addedCities = city;\n       state = [...new Set(state)];\n        state = state.sort();\n        vm.addedStates = state;\n    }).catch(function (error) {\n        console.error(error);\n    });\n    \n  },\n  methods: {\n    selectedCityOption(){\n    if(this.selectedCityName!==null){\n    //console.log(this.hospitalAvailabilityData)\n    let dataToSort = [...this.allHospitalAvailabilityData]\n    // dataToSort.sort(function(a, b) {\n    // var textA = a.availability\n    // var textB = b.availability\n    // return  (textA < textB) ? -1 : (textA > textB) ? 1 : 0;\n    // });\n    let result=dataToSort.filter(city=> city.district.toLowerCase() == this.selectedCityName.toLowerCase());\n    this.hospitalAvailabilityData = result\n    }\n    else{\n     \n    }\n    },\n    selectedStatesOption(){\n        let citiesWiseData=this.allHospitalAvailabilityData.filter(obj=> obj.state == this.selectedStateName);\n        let cityInState = citiesWiseData.map(cityAvailable => cityAvailable.district);\n        cityInState = [...new Set(cityInState)];\n        cityInState = cityInState.sort();\n        this.addedCities = cityInState;\n    },\n    convertTimeToIST(date){\n        var convertedDate = moment.utc(date).local().format('DD-MMM-YYYY h:mm A');\n        return convertedDate;\n    }\n    }\n};\n",{"version":3,"sources":["hospital.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"hospital.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div class=\"row\">\n       <!-- Dropdown -->\n\n      <div class=\"md-layout md-gutter\">\n      <div class=\"md-layout-item\">\n        <md-field>\n          <label for=\"states\" style=\"color: #66615B;\">Select Your States</label>\n          <md-select v-model=\"selectedStateName\" name=\"states\" id=\"states\">\n            <div v-for=\"states in addedStates\" @click=\"selectedStatesOption()\">\n            <md-option :value=states>{{states}}</md-option>\n            </div>\n            <!-- <md-option value=\"Kanpur\">Kanpur</md-option> -->\n          </md-select>\n        </md-field>\n      </div>    \n      <div class=\"md-layout-item\">\n        <md-field>\n          <label for=\"country\" style=\"color: #66615B;\">Select Your City</label>\n          <md-select v-model=\"selectedCityName\" name=\"country\" id=\"country\">\n            <div v-for=\"city in addedCities\" @click=\"selectedCityOption()\">\n            <md-option :value=city>{{city}}</md-option>\n            </div>\n            <!-- <md-option value=\"Kanpur\">Kanpur</md-option> -->\n          </md-select>\n        </md-field>\n      </div>\n    </div>\n    \n    <div class=\"hospital-cards\" v-for=\"hospital in hospitalAvailabilityData\" v-if=\"selectedCityName !== null\">\n    <md-card>\n      <md-card-header>\n        <md-card-header-text>\n          <div class=\"md-title\">{{hospital.name}}</div>\n          <div class=\"md-subhead\">{{hospital.availability}}</div>\n        </md-card-header-text>\n\n        <!-- <md-menu md-size=\"big\" md-direction=\"bottom-end\">\n          <md-button class=\"md-icon-button\" md-menu-trigger>\n            <md-icon>more_vert</md-icon>\n          </md-button>\n\n          <md-menu-content>\n            <md-menu-item @click=\"doACall\">\n              <span>Call</span>\n              <md-icon>phone</md-icon>\n            </md-menu-item>\n\n            <md-menu-item @click=\"sendMessage\">\n              <span>Send a message</span>\n              <md-icon>message</md-icon>\n            </md-menu-item>\n          </md-menu-content>\n        </md-menu> -->\n      </md-card-header>\n        <div class=\"line\"></div>\n      <md-card-content>\n        <span v-if=\"hospital.typeOfBedAvailable!==null\">Available bed type:<br></span>\n       <span v-if=\"hospital.typeOfBedAvailable!==null\" v-for=\"types in hospital.typeOfBedAvailable\">{{types}}<br></span>\n        <span>Contact No. : {{hospital.phone1}}</span> <br>\n        <span>Verification Status: {{hospital.verificationStatus}} <br> {{hospital.comment}}</span>\n        <br><span>Checked on: {{convertTimeToIST(hospital.lastVerifiedOn)}}</span><br>\n      </md-card-content>\n\n      <!-- <md-card-actions md-alignment=\"left\">\n        <md-button>Action</md-button>\n        <md-button>Action</md-button>\n      </md-card-actions> -->\n    </md-card>\n  </div>\n    </div>\n</template>\n<script>\nimport { EventBus } from '../main.js'\nimport axios from \"axios\";\nimport moment from 'moment'\n\nexport default {\n  components: {\n    \n  },\n  data() {\n    return {\n    selectedCityName: null,\n    selectedStateName: null,\n    currentTab:'',\n    addedCities:[\n        \"Lucknow\"\n      ],\n    addedStates:[\"Uttar Pradesh\"],\n    hospitalAvailabilityData:[],\n    allHospitalAvailabilityData:[]\n    };\n  },\n  computed: {\n    \n  },\n  mounted(){\n    this.currentTab=sessionStorage.selectedTab\n    EventBus.$on('setPathName',(value)=>{\n      sessionStorage.selectedTab = value;\n      this.currentTab=sessionStorage.selectedTab\n      this.selectedCityName=null;\n    })\n    if(this.selectedStateName===null){\n        this.selectedCityName=null;\n        this.addedCities=[];\n    }\n    const options = {\n    method: 'GET',\n    url: 'https://life-api.coronasafe.network/data/hospital_clinic_centre.json',\n  \n    };\n    let vm=this\n    axios.request(options).then(function (response) {\n        vm.allHospitalAvailabilityData = response.data.data;\n       // let city = vm.allHospitalAvailabilityData.map(cityAvailable => cityAvailable.district);\n        let state = vm.allHospitalAvailabilityData.map(stateAvailable => stateAvailable.state);\n       // vm.addedCities = city;\n       state = [...new Set(state)];\n        state = state.sort();\n        vm.addedStates = state;\n    }).catch(function (error) {\n        console.error(error);\n    });\n    \n  },\n  methods: {\n    selectedCityOption(){\n    if(this.selectedCityName!==null){\n    //console.log(this.hospitalAvailabilityData)\n    let dataToSort = [...this.allHospitalAvailabilityData]\n    // dataToSort.sort(function(a, b) {\n    // var textA = a.availability\n    // var textB = b.availability\n    // return  (textA < textB) ? -1 : (textA > textB) ? 1 : 0;\n    // });\n    let result=dataToSort.filter(city=> city.district.toLowerCase() == this.selectedCityName.toLowerCase());\n    this.hospitalAvailabilityData = result\n    }\n    else{\n     \n    }\n    },\n    selectedStatesOption(){\n        let citiesWiseData=this.allHospitalAvailabilityData.filter(obj=> obj.state == this.selectedStateName);\n        let cityInState = citiesWiseData.map(cityAvailable => cityAvailable.district);\n        cityInState = [...new Set(cityInState)];\n        cityInState = cityInState.sort();\n        this.addedCities = cityInState;\n    },\n    convertTimeToIST(date){\n        var convertedDate = moment.utc(date).local().format('DD-MMM-YYYY h:mm A');\n        return convertedDate;\n    }\n    }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.hospital-cards{\n    text-align: center;\n    width: 33%  !important;\n}\n.line{\n    border-bottom: 1px solid grey;\n    margin: 0px 15px;\n}\n.md-card {\n    width: 95%;\n    margin: 4px;\n    display: inline-block;\n    vertical-align: top;\n    //outline: solid;\n    //outline-color: #D2691E;\n  }\n\n  .md-card-example {\n    .md-subhead {\n      .md-icon {\n        $size: 16px;\n        width: $size;\n        min-width: $size;\n        height: $size;\n        font-size: $size !important;\n      }\n\n      span {\n        vertical-align: middle;\n      }\n    }\n\n    .card-reservation {\n      margin-top: 8px;\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n\n      .md-icon {\n        margin: 8px;\n      }\n    }\n\n    .md-button-group {\n      display: flex;\n\n      .md-button {\n        min-width: 60px;\n        border-radius: 2px;\n      }\n    }\n}\n.md-layout{\n  width: 100%;\n}\n.md-field{\n  width: 100%  !important;\n  float: left;\n}\n.md-layout-item{\n  padding-right: 0px !important;\n}\n.md-theme-default\n{\n  background: #f4f3ef !important; \n}\n.md-list-item-text{\n  color: black;\n  /* font-weight: bold; */\n  font-size: 15px  !important;\n}\n.heading-no-city-selected{\n  display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    height: 400px;\n    font-size: 20px;\n    font-weight: bold; \n}\n</style>\n"]}]}